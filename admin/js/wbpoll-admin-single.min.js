if("undefined"!=typeof wp&&wp.i18n){let __=wp.i18n.__}($=>{$(document).ready(function(){function wbpoll_copyStringToClipboard(str){var el=document.createElement("textarea");el.value=str,el.setAttribute("readonly",""),el.style={position:"absolute",left:"-9999px"},document.body.appendChild(el),el.select(),document.execCommand("copy"),document.body.removeChild(el)}1==$('input[name="_wbpoll_never_expire"]:checked').val()&&($("._wbpoll_start_date,._wbpoll_end_date,._wbpoll_show_result_before_expire").hide(),$("input[name=_wbpoll_show_result_before_expire][value='0']").prop("checked",!0)),$('input[name="_wbpoll_never_expire"]').on("change",function(e){1==$(this).val()?($("._wbpoll_start_date,._wbpoll_end_date,._wbpoll_show_result_before_expire").hide(),$("input[name=_wbpoll_show_result_before_expire][value='0']").prop("checked",!0)):$("._wbpoll_start_date,._wbpoll_end_date,._wbpoll_show_result_before_expire").show()}),1==$("#preloader").length&&setTimeout(function(){document.getElementById("preloader").style.display="none"},3500),$(".selecttwo-select").select2({placeholder:wbpolladminsingleObj.please_select,allowClear:!1}),$(".wbpollmetadatepicker").datetimepicker({dateFormat:"yy-mm-dd",timeFormat:"HH:mm:ss",minDate:0}),$.datepicker._gotoToday=function(id){var inst=this._getInst($(id)[0]),$dp=inst.dpDiv,id=(this._base_gotoToday(id),new Date),id=new Date(id.getUTCFullYear(),id.getUTCMonth(),id.getUTCDate(),id.getUTCHours(),id.getUTCMinutes(),id.getUTCSeconds());this._setTime(inst,id),$(".ui-datepicker-today",$dp).click()},$("#wb_poll_answers_items").length&&$("#wb_poll_answers_items").sortable({group:"no-drop",placeholder:"wb_poll_items wb_poll_items_placeholder",handle:".cbpollmoveicon",onDragStart:function($item,container,_super){container.options.drop||$item.clone().insertAfter($item),_super($item,container)}});$("#wbpoll_answer_wrap").on("click",".add-wb-poll-answer",function(event){event.preventDefault();var event=$(this),$answer_add_wrap=(event.closest("#wbpoll_answer_wrap"),event.parent(".add-wb-poll-answer-wrap")),$post_id=Number($answer_add_wrap.data("postid")),$index=Number($("#wbpoll_answer_extra_answercount").val()),$busy=Number($answer_add_wrap.data("busy")),$type=event.data("type"),answer_color=($("#poll_type").val($type),"#"+"0123456789abcdef".split("").map(function(v,i,a){return 5<i?null:a[Math.floor(16*Math.random())]}).join(""));0===$busy&&($answer_add_wrap.data("busy",1),$.ajax({type:"post",dataType:"json",url:wbpolladminsingleObj.ajaxurl,data:{action:"wbpoll_get_answer_template",answer_counter:$index,answer_color:answer_color,is_voted:0,poll_postid:$post_id,answer_type:$type,security:wbpolladminsingleObj.nonce},success:function(data,textStatus,XMLHttpRequest){itemsType($type)?$("#wb_poll_answers_items").append(data):$("#wb_poll_answers_items").html(data),$(".wbpoll-containable-list-item-toolbar.toolbar-"+$index).addClass("active"),wp.wbpolljshooks.doAction("wppoll_new_answer_template_render",$index,$type,answer_color,$post_id,$),$index++,$("#wbpoll_answer_extra_answercount").val($index),$answer_add_wrap.data("busy",0)}}))}),$("#wbpoll_answer_wrap").on("click",".add-wb-poll-image-answer",function(event){event.preventDefault();var event=$(this),$answer_add_wrap=(event.closest("#wbpoll_answer_wrap"),event.parent(".add-wb-poll-answer-image-wrap")),$post_id=Number($answer_add_wrap.data("postid")),$index=Number($("#wbpoll_answer_extra_answercount").val()),$busy=Number($answer_add_wrap.data("busy")),$type=event.data("type"),answer_color=($("#poll_type").val($type),"#"+"0123456789abcdef".split("").map(function(v,i,a){return 5<i?null:a[Math.floor(16*Math.random())]}).join(""));0===$busy&&($answer_add_wrap.data("busy",1),$.ajax({type:"post",dataType:"json",url:wbpolladminsingleObj.ajaxurl,data:{action:"wbpoll_get_answer_template",answer_counter:$index,answer_color:answer_color,is_voted:0,poll_postid:$post_id,answer_type:$type,security:wbpolladminsingleObj.nonce},success:function(data,textStatus,XMLHttpRequest){itemsType($type)?$("#wb_poll_answers_items").append(data):$("#wb_poll_answers_items").html(data),$(".wbpoll-containable-list-item-toolbar.toolbar-"+$index).addClass("active"),wp.wbpolljshooks.doAction("wbpoll_new_answer_template_render",$index,$type,answer_color,$post_id,$),$index++,$("#wbpoll_answer_extra_answercount").val($index),$answer_add_wrap.data("busy",0)}}))}),$("#wbpoll_answer_wrap").on("click",".add-wb-poll-video-answer",function(event){event.preventDefault();var event=$(this),$answer_add_wrap=(event.closest("#wbpoll_answer_wrap"),event.parent(".add-wb-poll-answer-video-wrap")),$post_id=Number($answer_add_wrap.data("postid")),$index=Number($("#wbpoll_answer_extra_answercount").val()),$busy=Number($answer_add_wrap.data("busy")),$type=event.data("type"),answer_color=($("#poll_type").val($type),"#"+"0123456789abcdef".split("").map(function(v,i,a){return 5<i?null:a[Math.floor(16*Math.random())]}).join(""));0===$busy&&($answer_add_wrap.data("busy",1),$.ajax({type:"post",dataType:"json",url:wbpolladminsingleObj.ajaxurl,data:{action:"wbpoll_get_answer_template",answer_counter:$index,answer_color:answer_color,is_voted:0,poll_postid:$post_id,answer_type:$type,security:wbpolladminsingleObj.nonce},success:function(data,textStatus,XMLHttpRequest){itemsType("video")?$("#wb_poll_answers_items").append(data):$("#wb_poll_answers_items").html(data),$(".wbpoll-containable-list-item-toolbar.toolbar-"+$index).addClass("active"),wp.wbpolljshooks.doAction("wbpoll_new_answer_template_render",$index,$type,answer_color,$post_id,$),$index++,$("#wbpoll_answer_extra_answercount").val($index),$answer_add_wrap.data("busy",0),$(".yes_video").on("click",function(){var videoclass,choice=$(this).val(),id=$(this).data("id");"yes"==choice&&(choice=$(".wb-hide-"+id+" .video_url").val(),videoclass=$(".wb-hide-"+id+" .video_url").data("text"),$.getJSON("https://noembed.com/embed",{format:"json",url:choice},function(response){response.error?($(".error-"+id).text("Please add correct link"),$(".hide_suggestion-"+id+" input#no").prop("checked",!0)):($(".error-"+id).text(""),$(".video_"+videoclass).html(response.html),$("#wbpoll_answer-"+id).val(response.title),response=$(response.html).attr("src"),$("#wbpoll_answer-url-"+id).val(response))})),$(".hide_suggestion-"+id).hide()})}}))}),$("#wbpoll_answer_wrap").on("click",".add-wb-poll-audio-answer",function(event){event.preventDefault();var event=$(this),$answer_add_wrap=(event.closest("#wbpoll_answer_wrap"),event.parent(".add-wb-poll-answer-audio-wrap")),$post_id=Number($answer_add_wrap.data("postid")),$index=Number($("#wbpoll_answer_extra_answercount").val()),$busy=Number($answer_add_wrap.data("busy")),$type=event.data("type"),answer_color=($("#poll_type").val($type),"#"+"0123456789abcdef".split("").map(function(v,i,a){return 5<i?null:a[Math.floor(16*Math.random())]}).join(""));0===$busy&&($answer_add_wrap.data("busy",1),$.ajax({type:"post",dataType:"json",url:wbpolladminsingleObj.ajaxurl,data:{action:"wbpoll_get_answer_template",answer_counter:$index,answer_color:answer_color,is_voted:0,poll_postid:$post_id,answer_type:$type,security:wbpolladminsingleObj.nonce},success:function(data,textStatus,XMLHttpRequest){itemsType("audio")?$("#wb_poll_answers_items").append(data):$("#wb_poll_answers_items").html(data),$(".wbpoll-containable-list-item-toolbar.toolbar-"+$index).addClass("active"),wp.wbpolljshooks.doAction("wbpoll_new_answer_template_render",$index,$type,answer_color,$post_id,$),$index++,$("#wbpoll_answer_extra_answercount").val($index),$answer_add_wrap.data("busy",0),$(".yes_audio").on("click",function(){var audioclass,choice=$(this).val(),id=$(this).data("id");"yes"==choice&&(choice=$(".wb-hide-"+id+" .audio_url").val(),audioclass=$(".wb-hide-"+id+" .audio_url").data("text"),$.getJSON("https://noembed.com/embed",{format:"json",url:choice},function(response){response.error?($(".error-"+id).text("Please add correct link"),$(".hide_suggestion-"+id+" input#no").prop("checked",!0)):($(".error-"+id).text(""),$(".audio_"+audioclass).html(response.html),$("#wbpoll_answer-"+id).val(response.title),response=$(response.html).attr("src"),$("#wbpoll_answer-url-"+id).val(response))})),$(".hide_suggestion-"+id).hide()})}}))}),$("#wbpoll_answer_wrap").on("click",".add-wb-poll-html-answer",function(event){event.preventDefault();var event=$(this),$answer_add_wrap=(event.closest("#wbpoll_answer_wrap"),event.parent(".add-wb-poll-answer-html-wrap")),$post_id=Number($answer_add_wrap.data("postid")),$index=Number($("#wbpoll_answer_extra_answercount").val()),$busy=Number($answer_add_wrap.data("busy")),$type=event.data("type"),answer_color=($("#poll_type").val($type),"#"+"0123456789abcdef".split("").map(function(v,i,a){return 5<i?null:a[Math.floor(16*Math.random())]}).join(""));0===$busy&&($answer_add_wrap.data("busy",1),$.ajax({type:"post",dataType:"json",url:wbpolladminsingleObj.ajaxurl,data:{action:"wbpoll_get_answer_template",answer_counter:$index,answer_color:answer_color,is_voted:0,poll_postid:$post_id,answer_type:$type,security:wbpolladminsingleObj.nonce},success:function(data,textStatus,XMLHttpRequest){itemsType("html")?$("#wb_poll_answers_items").append(data):$("#wb_poll_answers_items").html(data),$(".wbpoll-containable-list-item-toolbar.toolbar-"+$index).addClass("active"),wp.wbpolljshooks.doAction("wbpoll_new_answer_template_render",$index,$type,answer_color,$post_id,$),$index++,$("#wbpoll_answer_extra_answercount").val($index),$answer_add_wrap.data("busy",0),tinymce.init({selector:"textarea.tiny",menubar:!1,max_height:500,max_width:800,min_height:200,min_width:800,toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help"})}}))});let itemsType=type=>type===$(".wb_poll_items").data("type");$("#wbpoll_answer_wrap").on("click","#upload-btn",function(e){var mediaUploader,imgclass=$(this).data("text");e.preventDefault(),(mediaUploader=wp.media.frames.file_frame=wp.media({title:"Choose Image",button:{text:"Choose Image"},library:{type:["image"]},multiple:!1})).on("select",function(){var attachment=mediaUploader.state().get("selection").first().toJSON();$("."+imgclass).val(attachment.url),$(".image_"+imgclass).html('<img width="266" height="266" src="'+attachment.url+'">')}),mediaUploader.open()}),$("#wbpoll_answer_wrap").on("click","#upload-btn-video",function(e){var mediaUploader,imgclass=$(this).data("text"),id=$(this).data("id");e.preventDefault(),(mediaUploader=wp.media.frames.file_frame=wp.media({title:"Choose video",button:{text:"Choose video"},library:{type:["video"]},multiple:!1})).on("select",function(){var attachment=mediaUploader.state().get("selection").first().toJSON();$("."+imgclass).val(attachment.url),$(".video_"+imgclass).html('<video src="'+attachment.url+'" controls="" poster="" preload="none"></video>')}),mediaUploader.open(),$(".hide_suggestion-"+id).hide(),$(".hide_suggestion-"+id+" input#no").prop("checked",!0)}),$("#wbpoll_answer_wrap").on("click","#upload-audio-btn",function(e){var mediaUploader,imgclass=$(this).data("text"),id=$(this).data("id");e.preventDefault(),(mediaUploader=wp.media.frames.file_frame=wp.media({title:"Choose audio",button:{text:"Choose audio"},library:{type:["audio"]},multiple:!1})).on("select",function(){var attachment=mediaUploader.state().get("selection").first().toJSON();$("."+imgclass).val(attachment.url),$(".audio_"+imgclass).html('<audio src="'+attachment.url+'" controls="" poster="" preload="none"></audio>')}),mediaUploader.open(),$(".hide_suggestion-"+id).hide(),$(".hide_suggestion-"+id+" input#no").prop("checked",!0)}),$("#wbpoll_answer_wrap").on("keyup",".image_url",function(e){var imgclass=$(this).data("text"),url=$(this).val();$(".image_"+imgclass).html('<img width="266" height="266" src="'+url+'">')}),$("#wbpoll_answer_wrap").on("keyup",".video_url",function(e){var videoclass,id,url=$(this).val();""!=url&&(videoclass=$(this).data("text"),id=$(this).data("id"),$(".hide_suggestion-"+id).show(),$(".video_"+videoclass).html('<video src="'+url+'" controls="" poster="" preload="none"></video>'))}),$(".yes_video").on("click",function(){var videoclass,choice=$(this).val(),id=$(this).data("id");"yes"==choice&&(choice=$(".wb-hide-"+id+" .video_url").val(),videoclass=$(".wb-hide-"+id+" .video_url").data("text"),$.getJSON("https://noembed.com/embed",{format:"json",url:choice},function(response){response.error?($(".error-"+id).text("Please add correct link"),$(".hide_suggestion-"+id+" input#no").prop("checked",!0)):($(".error-"+id).text(""),$(".video_"+videoclass).html(response.html),$("#wbpoll_answer-"+id).val(response.title),response=$(response.html).attr("src"),$("#wbpoll_answer-url-"+id).val(response))})),$(".hide_suggestion-"+id).hide()}),$("#wbpoll_answer_wrap").on("keyup",".audio_url",function(e){var id,audioclass,url=$(this).val();""!=url&&(id=$(this).data("id"),audioclass=$(this).data("text"),$(".hide_suggestion-"+id).show(),$(".audio_"+audioclass).html('<audio src="'+url+'" controls="" preload="none"></audio>'))}),$(".yes_audio").on("click",function(){var audioclass,choice=$(this).val(),id=$(this).data("id");"yes"==choice&&(choice=$(".wb-hide-"+id+" .audio_url").val(),audioclass=$(".wb-hide-"+id+" .audio_url").data("text"),$.getJSON("https://noembed.com/embed",{format:"json",url:choice},function(response){response.error?($(".error-"+id).text("Please add correct link"),$(".hide_suggestion-"+id+" input#no").prop("checked",!0)):($(".error-"+id).text(""),$(".audio_"+audioclass).html(response.html),$("#wbpoll_answer-"+id).val(response.title),response=$(response.html).attr("src"),$("#wbpoll_answer-url-"+id).val(response))})),$(".hide_suggestion-"+id).hide()}),$("#wbpoll_answer_wrap").on("click",".wb_pollremove",function(event){event.preventDefault();event=$(this);confirm(wbpolladminsingleObj.deleteconfirm)&&event.parent().parent(".wb_poll_items").remove()}),$(".wbpoll_ctp").on("click",function(e){e.preventDefault();var $this=$(this);wbpoll_copyStringToClipboard($this.prev(".wbpollshortcode").text()),$this.attr("aria-label",wbpolladminsingleObj.copied),window.setTimeout(function(){$this.attr("aria-label",wbpolladminsingleObj.copy)},1e3)}),$(".wbpoll_embed").on("click",function(e){e.preventDefault();var $this=$(this);wbpoll_copyStringToClipboard($this.prev(".wbpollemded").text()),$this.attr("aria-label",wbpolladminsingleObj.copied),window.setTimeout(function(){$this.attr("aria-label",wbpolladminsingleObj.copy)},1e3)}),$(".hidetab").hide(),$(".wbpoll-containable-list-item-toolbar").on("click",function(){var dataid=$(this).data("id");$(".wb-hide-"+dataid).toggle(),$(this).toggleClass("active")}),$(".wbpoll-containable-list-item-toolbar").on("click",function(e){e.preventDefault(),tinymce.init({selector:"textarea.tiny",menubar:!1,max_height:500,max_width:800,min_height:200,min_width:800,toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help"})})})})(jQuery);