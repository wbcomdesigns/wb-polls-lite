if("undefined"!=typeof wp&&wp.i18n){let __=wp.i18n.__}($=>{$(document).ready(function(){1<=$("textarea.wbpoll_html_answer_textarea.tiny").length&&"undefined"!=typeof tinymce&&tinymce.init({selector:"textarea.wbpoll_html_answer_textarea.tiny",menubar:!1,max_height:500,max_width:800,min_height:200,min_width:800,toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help"}),1==$('input[name="_wbpoll_never_expire"]:checked').val()&&$(".wbpoll_show_date, .wbpoll_result_after_expires").hide(),$('input[name="_wbpoll_never_expire"]').on("change",function(e){1==$(this).val()?($(".wbpoll_show_date, .wbpoll_result_after_expires").hide(),$("input[name=_wbpoll_show_result_before_expire][value='0']").prop("checked",!0)):$(".wbpoll_show_date, .wbpoll_result_after_expires").show()}),jQuery("#poll_type").on("change",function(e){e.preventDefault(),jQuery("#error_type").css("display","none");e=jQuery(this).val();"default"==e?(jQuery("#addtitonal_option").show(),jQuery("#type_text").show(),jQuery("#type_image").hide(),jQuery("div#type_image input#wbpoll_answer").val(""),jQuery("div#type_image input#wbpoll_image_answer_url").val(""),jQuery("#type_video").hide(),jQuery("div#type_video input#wbpoll_answer").val(""),jQuery("div#type_video input#wbpoll_video_answer_url").val(""),jQuery("#type_audio").hide(),jQuery("div#type_audio input#wbpoll_answer").val(""),jQuery("div#type_audio input#wbpoll_audio_answer_url").val(""),jQuery("#type_html").hide(),jQuery("div#type_html input#wbpoll_answer").val(""),jQuery("div#type_html #wbpoll_html_answer_textarea").val("")):"image"==e?(jQuery("#addtitonal_option").hide(),jQuery("#type_image").show(),jQuery("#type_text").hide(),jQuery("div#type_text input#wbpoll_answer").val(""),jQuery("#type_video").hide(),jQuery("div#type_video input#wbpoll_answer").val(""),jQuery("div#type_video input#wbpoll_video_answer_url").val(""),jQuery("#type_audio").hide(),jQuery("div#type_audio input#wbpoll_answer").val(""),jQuery("div#type_audio input#wbpoll_audio_answer_url").val(""),jQuery("#type_html").hide(),jQuery("div#type_html input#wbpoll_answer").val(""),jQuery("div#type_html #wbpoll_html_answer_textarea").val("")):"video"==e?(jQuery("#addtitonal_option").hide(),jQuery("#type_video").show(),jQuery("#type_image").hide(),jQuery("div#type_image input#wbpoll_answer").val(""),jQuery("div#type_image input#wbpoll_image_answer_url").val(""),jQuery("#type_text").hide(),jQuery("div#type_text input#wbpoll_answer").val(""),jQuery("#type_audio").hide(),jQuery("div#type_audio input#wbpoll_answer").val(""),jQuery("div#type_audio input#wbpoll_audio_answer_url").val(""),jQuery("#type_html").hide(),jQuery("div#type_html input#wbpoll_answer").val(""),jQuery("div#type_html #wbpoll_html_answer_textarea").val("")):"audio"==e?(jQuery("#addtitonal_option").hide(),jQuery("#type_audio").show(),jQuery("#type_video").hide(),jQuery("div#type_video input#wbpoll_answer").val(""),jQuery("div#type_video input#wbpoll_video_answer_url").val(""),jQuery("#type_image").hide(),jQuery("div#type_image input#wbpoll_answer").val(""),jQuery("div#type_image input#wbpoll_image_answer_url").val(""),jQuery("#type_text").hide(),jQuery("div#type_text input#wbpoll_answer").val(""),jQuery("#type_html").hide(),jQuery("div#type_html input#wbpoll_answer").val(""),jQuery("div#type_html #wbpoll_html_answer_textarea").val("")):"html"==e?(jQuery("#addtitonal_option").hide(),jQuery("#type_html").show(),jQuery("#type_video").hide(),jQuery("div#type_video input#wbpoll_answer").val(""),jQuery("div#type_video input#wbpoll_video_answer_url").val(""),jQuery("#type_image").hide(),jQuery("div#type_image input#wbpoll_answer").val(""),jQuery("div#type_image input#wbpoll_image_answer_url").val(""),jQuery("#type_text").hide(),jQuery("div#type_text input#wbpoll_answer").val(""),jQuery("#type_audio").hide(),jQuery("div#type_audio input#wbpoll_answer").val(""),jQuery("div#type_audio input#wbpoll_audio_answer_url").val(""),"undefined"!=typeof tinymce&&tinymce.init({selector:"textarea.wbpoll_html_answer_textarea.tiny",menubar:!1,max_height:500,max_width:800,min_height:200,min_width:800,toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help"})):(jQuery("#addtitonal_option").hide(),jQuery("#type_text").hide(),jQuery("div#type_text input#wbpoll_answer").val(""),jQuery("#type_image").hide(),jQuery("div#type_image input#wbpoll_answer").val(""),jQuery("div#type_image input#wbpoll_image_answer_url").val(""),jQuery("#type_video").hide(),jQuery("div#type_video input#wbpoll_answer").val(""),jQuery("div#type_video input#wbpoll_video_answer_url").val(""),jQuery("#type_audio").hide(),jQuery("div#type_audio input#wbpoll_answer").val(""),jQuery("div#type_audio input#wbpoll_audio_answer_url").val(""),jQuery("#type_html").hide(),jQuery("div#type_html input#wbpoll_answer").val(""),jQuery("div#type_html #wbpoll_html_answer_textarea").val(""))});jQuery(document).on("click","a.add-field.extra-fields-text",function(e){e.preventDefault();e=jQuery(this).data("id")+1;jQuery(this).data("id",e),jQuery(".extra-fields-text").attr("data-id",e),jQuery(".text_records").clone().appendTo(".text_records_dynamic"),jQuery(".text_records_dynamic .text_records").addClass("single remove"),jQuery(".html_records_dynamic .extra-fields-text").remove(),jQuery(".single").append('<a href="#" class="remove-field btn-remove-text">Remove Fields</a>'),jQuery(".text_records_dynamic > .single").attr("class","remove remove"+e),jQuery(".text_records_dynamic input").each(function(){var fieldname=jQuery(this).attr("name");jQuery(this).attr("name",fieldname)}),jQuery(".remove"+e+" .wbpoll_answer").val("")}),jQuery(document).on("click","a.add-field.extra-fields-text-edit",function(e){e.preventDefault();e=jQuery(this).data("id")+1;jQuery(this).data("id",e),jQuery(".extra-fields-text-edit").attr("data-id",e),jQuery(".text_records-edit").clone().appendTo(".text_records_dynamic-edit"),jQuery(".text_records_dynamic-edit .text_records-edit").addClass("single remove"),jQuery(".html_records_dynamic-edit .extra-fields-text-edit").remove(),jQuery(".single").append('<a href="#" class="remove-field btn-remove-text">Remove Fields</a>'),jQuery(".text_records_dynamic-edit > .single").attr("class","remove remove"+e),jQuery(".text_records_dynamic-edit input").each(function(){var fieldname=jQuery(this).attr("name");jQuery(this).attr("name",fieldname)}),jQuery(".remove"+e+" .wbpoll_answer").val("")}),jQuery(document).on("click","a.add-field.extra-fields-image",function(e){e.preventDefault();e=jQuery(this).data("id")+1;jQuery(this).data("id",e),jQuery(".extra-fields-image").attr("data-id",e),jQuery(".image_records").clone().appendTo(".image_records_dynamic"),jQuery(".image_records_dynamic .image_records").addClass("single remove"),jQuery(".remove"+e+" .extra-fields-image").remove(),jQuery(".single").append('<a href="#" class="remove-field btn-remove-image">Remove Fields</a>'),jQuery(".image_records_dynamic > .single").attr("class","remove remove"+e),jQuery(".image_records_dynamic input").each(function(){var fieldname=jQuery(this).attr("name");jQuery(this).attr("name",fieldname)}),jQuery(".remove"+e+" .wbpoll_answer").val(""),jQuery(".remove"+e+" .wbpoll_image_answer_url").val(""),jQuery(".remove"+e+" .wbpoll-image-input-preview .wbpoll-image-input-preview-thumbnail").html("")}),jQuery(document).on("click","a.add-field.extra-fields-image-edit",function(e){e.preventDefault();e=jQuery(this).data("id")+1;jQuery(this).data("id",e),jQuery(".extra-fields-image-edit").attr("data-id",e),jQuery(".image_records_edit").clone().appendTo(".image_records_dynamic_edit"),jQuery(".image_records_dynamic_edit .image_records_edit").addClass("single remove"),jQuery(".remove"+e+" .extra-fields-image-edit").remove(),jQuery(".single").append('<a href="#" class="remove-field btn-remove-image">Remove Fields</a>'),jQuery(".image_records_dynamic_edit > .single").attr("class","remove remove"+e),jQuery(".image_records_dynamic_edit input").each(function(){var fieldname=jQuery(this).attr("name");jQuery(this).attr("name",fieldname)}),jQuery(".remove"+e+" .wbpoll_answer").val(""),jQuery(".remove"+e+" .wbpoll_image_answer_url").val(""),jQuery(".remove"+e+" .wbpoll-image-input-preview .wbpoll-image-input-preview-thumbnail").html("")}),jQuery(document).on("click","a.add-field.extra-fields-video",function(e){e.preventDefault();var e=jQuery(this).data("id")+1,count=(jQuery(this).data("id",e),jQuery(".extra-fields-video").attr("data-id",e),jQuery(".video_records").clone().html(function(i,oldHTML){return oldHTML.replace(/\ name="/g," ")}).appendTo(".video_records_dynamic"),jQuery(".video_records_dynamic .video_records").addClass("single remove"),jQuery(".remove"+e+" .extra-fields-video").remove(),jQuery(".single").append('<a href="#" class="remove-field btn-remove-video">Remove Fields</a>'),jQuery(".video_records_dynamic > .single").attr("class","remove remove"+e),0);jQuery(".ans-video-records-wrap").each(function(){jQuery(this).find("input").each(function(){var dataName=jQuery(this).data("name");dataName&&(dataName=dataName.replace("[]","["+count+"]"),jQuery(this).attr("name",dataName))}),count++}),jQuery(".remove"+e+" .wbpoll_answer").val(""),jQuery(".remove"+e+" .wbpoll_video_answer_url").val(""),jQuery(".remove"+e+" .wbpoll-image-input-preview .wbpoll-image-input-preview-thumbnail").html("")});var count=0,count=(jQuery(".ans-video-records-wrap").each(function(){jQuery(this).find("input").each(function(){var dataName=jQuery(this).data("name");dataName&&(dataName=dataName.replace("[]","["+count+"]"),jQuery(this).attr("name",dataName))}),count++}),jQuery(document).on("click","a.add-field.extra-fields-video-edit",function(e){e.preventDefault();var e=jQuery(this).data("id")+1,count=(jQuery(this).data("id",e),jQuery(".extra-fields-video-edit").attr("data-id",e),jQuery(".video_records_edit").clone().html(function(i,oldHTML){return oldHTML.replace(/\ name="/g," ")}).appendTo(".video_records_dynamic_edit"),jQuery(".video_records_dynamic_edit .video_records_edit").addClass("single remove"),jQuery(".remove"+e+" .extra-fields-video-edit").remove(),jQuery(".single").append('<a href="#" class="remove-field btn-remove-video">Remove Fields</a>'),jQuery(".video_records_dynamic_edit > .single").attr("class","remove remove"+e),0);jQuery(".ans-video-records-wrap").each(function(){jQuery(this).find("input").each(function(){var dataName=jQuery(this).data("name");dataName&&(dataName=dataName.replace("[]","["+count+"]"),jQuery(this).attr("name",dataName))}),count++}),jQuery(".remove"+e+" .wbpoll_answer").val(""),jQuery(".remove"+e+" .wbpoll_video_answer_url").val(""),jQuery(".remove"+e+' .wbpoll_video_import_info[value="no"]').prop("checked",!1),jQuery(".remove"+e+" .wbpoll-image-input-preview .wbpoll-image-input-preview-thumbnail").html("")}),jQuery(document).on("click","a.add-field.extra-fields-audio",function(e){e.preventDefault();e=jQuery(this).data("id")+1;jQuery(this).data("id",e),jQuery(".extra-fields-audio").attr("data-id",e),jQuery(".audio_records").clone().html(function(i,oldHTML){return oldHTML.replace(/\ name="/g," ")}).appendTo(".audio_records_dynamic"),jQuery(".audio_records_dynamic .audio_records").addClass("single remove"),jQuery(".remove"+e+" .extra-fields-audio").remove(),jQuery(".single").append('<a href="#" class="remove-field btn-remove-audio">Remove Fields</a>'),jQuery(".audio_records_dynamic > .single").attr("class","remove remove"+e),jQuery(".ans-audio-records-wrap").each(function(){jQuery(this).find("input").each(function(){var dataName=jQuery(this).data("name");dataName&&(dataName=dataName.replace("[]","["+count+"]"),jQuery(this).attr("name",dataName))}),count++}),jQuery(".remove"+e+" .wbpoll_answer").val(""),jQuery(".remove"+e+" .wbpoll_audio_answer_url").val(""),jQuery(".remove"+e+" .wbpoll-image-input-preview .wbpoll-image-input-preview-thumbnail").html("")}),0);jQuery(".ans-audio-records-wrap").each(function(){jQuery(this).find("input").each(function(){var dataName=jQuery(this).data("name");dataName&&(dataName=dataName.replace("[]","["+count+"]"),jQuery(this).attr("name",dataName))}),count++}),jQuery(document).on("click","a.add-field.extra-fields-audio-edit",function(e){e.preventDefault();var e=jQuery(this).data("id")+1,count=(jQuery(this).data("id",e),jQuery(".extra-fields-audio-edit").attr("data-id",e),jQuery(".audio_records_edit").clone().html(function(i,oldHTML){return oldHTML.replace(/\ name="/g," ")}).appendTo(".audio_records_dynamic_edit"),jQuery(".audio_records_dynamic_edit .audio_records_edit").addClass("single remove"),jQuery(".remove"+e+" .extra-fields-audio-edit").remove(),jQuery(".single").append('<a href="#" class="remove-field btn-remove-audio">Remove Fields</a>'),jQuery(".audio_records_dynamic_edit > .single").attr("class","remove remove"+e),0);jQuery(".ans-audio-records-wrap").each(function(){jQuery(this).find("input").each(function(){var dataName=jQuery(this).data("name");dataName&&(dataName=dataName.replace("[]","["+count+"]"),jQuery(this).attr("name",dataName))}),count++}),jQuery(".remove"+e+" .wbpoll_answer").val(""),jQuery(".remove"+e+" .wbpoll_audio_answer_url").val(""),jQuery(".remove"+e+' .wbpoll_audio_import_info[value="no"]').prop("checked",!0),jQuery(".remove"+e+" .wbpoll-image-input-preview .wbpoll-image-input-preview-thumbnail").html("")}),jQuery(document).on("click","a.add-field.extra-fields-html",function(e){e.preventDefault();var e=jQuery(this).data("id")+1,count=(jQuery(this).data("id",e),jQuery(".extra-fields-html").attr("data-id",e),jQuery(".html_records").clone().appendTo(".html_records_dynamic"),jQuery(".html_records_dynamic .html_records").addClass("single remove"),jQuery(".single").append('<a href="#" class="remove-field btn-remove-html">Remove Fields</a>'),jQuery(".html_records_dynamic > .single").attr("class","remove remove"+e),0);jQuery(".html_records_dynamic input").each(function(){var fieldname=jQuery(this).attr("name"),fieldid=jQuery(this).attr("id");jQuery(this).attr("name",fieldname),jQuery(this).attr("id",fieldid+"_"+count),count++}),jQuery(".remove"+e+" .wbpoll_answer").val(""),jQuery(".remove"+e+" .wbpoll_html_answer_textarea").attr("id","wbpoll_html_answer_textarea_"+e).val(""),jQuery("#type_html .remove"+e+" .mce-tinymce.mce-container.mce-panel").remove(),"undefined"!=typeof tinymce&&(jQuery("#type_html .ans-records-wrap .wbpoll_html_answer_textarea").each(function(){var tiny_id=jQuery(this).attr("id");tinymce.remove("textarea.tiny#"+tiny_id),tinymce.init({selector:"textarea.tiny#"+tiny_id,menubar:!1,max_height:500,max_width:800,min_height:200,min_width:800,toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help"})}),jQuery("#type_html .mce-tinymce.mce-container.mce-panel").show())}),jQuery(document).on("click","a.add-field.extra-fields-html-edit",function(e){e.preventDefault();e=jQuery(this).data("id")+1;jQuery(this).data("id",e),jQuery(".extra-fields-html-edit").attr("data-id",e),jQuery(".html_records_edit").clone().appendTo(".html_records_dynamic_edit"),jQuery(".html_records_dynamic_edit .html_records_edit").addClass("single remove"),jQuery(".remove"+e+" .extra-fields-html-edit").remove(),jQuery(".single").append('<a href="#" class="remove-field btn-remove-html">Remove Fields</a>'),jQuery(".html_records_dynamic_edit > .single").attr("class","remove remove"+e),jQuery(".html_records_dynamic_edit input").each(function(){var fieldname=jQuery(this).attr("name");jQuery(this).attr("name",fieldname)}),jQuery(".remove"+e+" .wbpoll_answer").val(""),jQuery(".remove"+e+" .wbpoll_html_answer_textarea").attr("id","wbpoll_html_answer_textarea_"+e).val(""),jQuery("#type_html .remove"+e+" .mce-tinymce.mce-container.mce-panel").remove(),"undefined"!=typeof tinymce&&(jQuery("#type_html .ans-records-wrap .wbpoll_html_answer_textarea").each(function(){var tiny_id=jQuery(this).attr("id");tinymce.remove("textarea.tiny#"+tiny_id),tinymce.init({selector:"textarea.tiny#"+tiny_id,menubar:!1,max_height:500,max_width:800,min_height:200,min_width:800,toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help"})}),jQuery("#type_html .mce-tinymce.mce-container.mce-panel").show())}),jQuery(document).on("click",".remove-field",function(e){jQuery(this).parent().remove(),e.preventDefault()}),jQuery(".wbpollmetadatepicker").datetimepicker({lazyInit:!0,format:"Y-m-d H:i:s",minDate:new Date()}),jQuery(document).on("click",'.bpolls-attach[data-type="image"]',function(event){event.preventDefault();var event=jQuery(this).closest(".polls-answer, .ans-records-wrap"),updateurl=event.find(".wbpoll_image_answer_url"),previewEl=event.find(".polls-answer__preview, .wbpoll-image-input-preview-thumbnail"),file_frame=wp.media({title:"Choose Image",button:{text:"Choose Image"},library:{type:["image"]},multiple:!1});file_frame.on("select",function(){var attachment=file_frame.state().get("selection").first().toJSON();attachment.url&&(previewEl.html('<img width="266" height="266" src="'+attachment.url+'">'),updateurl.val(attachment.url))}),file_frame.open()}),jQuery(document).on("click",'.bpolls-attach[data-type="video"]',function(event){event.preventDefault();var event=jQuery(this).closest(".polls-answer, .ans-records-wrap"),updateurl=event.find(".wbpoll_video_answer_url"),previewEl=event.find(".polls-answer__preview, .wbpoll-image-input-preview-thumbnail"),file_frame=wp.media({title:"Choose Video",button:{text:"Choose Video"},library:{type:["video"]},multiple:!1});file_frame.on("select",function(){var attachment=file_frame.state().get("selection").first().toJSON();attachment.url&&(previewEl.html('<video src="'+attachment.url+'" controls="" poster="" preload="none"></video>'),updateurl.val(attachment.url))}),file_frame.open()}),jQuery(document).on("click",'.bpolls-attach[data-type="audio"]',function(event){event.preventDefault();var event=jQuery(this).closest(".polls-answer, .ans-records-wrap"),updateurl=event.find(".wbpoll_audio_answer_url"),previewEl=event.find(".polls-answer__preview, .wbpoll-image-input-preview-thumbnail"),file_frame=wp.media({title:"Choose Audio",button:{text:"Choose Audio"},library:{type:["audio"]},multiple:!1});file_frame.on("select",function(){var attachment=file_frame.state().get("selection").first().toJSON();attachment.url&&(previewEl.html('<audio src="'+attachment.url+'" controls="" preload="none"></audio>'),updateurl.val(attachment.url))}),file_frame.open()}),jQuery(document).on("keyup",".wbpoll_answer",function(e){e.preventDefault(),jQuery("#error_ans").css("display","none")}),jQuery(document).on("keyup",".wbpoll_image_answer_url",function(e){e.preventDefault();var e=jQuery(this).val(),imagclass=jQuery(this).parent().parent().find(".wbpoll-image-input-preview-thumbnail");jQuery(imagclass).html('<img width="266" height="266" src="'+e+'">')}),jQuery(document).on("keyup",".wbpoll_video_answer_url",function(e){e.preventDefault();var e=jQuery(this).val(),suggestion=jQuery(this).parent().find(".hide_suggestion"),imagclass=jQuery(this).parent().parent().find(".wbpoll-image-input-preview-thumbnail");jQuery(imagclass).html('<video src="'+e+'" controls="" poster="" preload="none"></video>'),jQuery(suggestion).show(),jQuery(suggestion).find("#no").prop("checked",!0),jQuery(suggestion).find("#yes").prop("checked",!1)}),jQuery(document).on("keyup",".wbpoll_audio_answer_url",function(e){e.preventDefault();var e=jQuery(this).val(),suggestion=jQuery(this).parent().find(".hide_suggestion"),imagclass=jQuery(this).parent().parent().find(".wbpoll-image-input-preview-thumbnail");jQuery(imagclass).html('<audio src="'+e+'" controls="" preload="none"></audio>'),jQuery(suggestion).show(),jQuery(suggestion).find("#no").prop("checked",!0),jQuery(suggestion).find("#yes").prop("checked",!1)}),jQuery(document).on("click",".yes_video",function(){var $this=jQuery(this),url=$this.parent().parent().find(".wbpoll_video_answer_url").val(),imagclass=$this.parent().parent().parent().find(".wbpoll-image-input-preview-thumbnail"),title=$this.parent().parent().find(".wbpoll_answer"),updateurl=$this.parent().parent().find(".wbpoll_video_answer_url"),suggestion=$this.parent();jQuery.getJSON("https://noembed.com/embed",{format:"json",url:url},function(response){response.error?(suggestion.find("#no").prop("checked",!0),suggestion.find("#yes").prop("checked",!1)):(jQuery(imagclass).html(response.html),jQuery(title).val(response.title),suggestion.find("#no").prop("checked",!1),response=jQuery(response.html).attr("src"),jQuery(updateurl).val(response))}).fail(function(){suggestion.find("#no").prop("checked",!0),suggestion.find("#yes").prop("checked",!1),console.error("Failed to fetch video embed info")}),suggestion.hide()}),jQuery(document).on("click",".yes_audio",function(){var $this=jQuery(this),url=$this.parent().parent().find(".wbpoll_audio_answer_url").val(),imagclass=$this.parent().parent().parent().find(".wbpoll-image-input-preview-thumbnail"),title=$this.parent().parent().find(".wbpoll_answer"),updateurl=$this.parent().parent().find(".wbpoll_audio_answer_url"),suggestion=$this.parent();jQuery.getJSON("https://noembed.com/embed",{format:"json",url:url},function(response){response.error?(suggestion.find("#no").prop("checked",!0),suggestion.find("#yes").prop("checked",!1)):(jQuery(imagclass).html(response.html),jQuery(title).val(response.title),suggestion.find("#no").prop("checked",!1),response=jQuery(response.html).attr("src"),jQuery(updateurl).val(response))}).fail(function(){suggestion.find("#no").prop("checked",!0),suggestion.find("#yes").prop("checked",!1),console.error("Failed to fetch audio embed info")}),suggestion.hide()}),jQuery("#wbpolls-create").submit(function(event){event.preventDefault();var event=jQuery("#poll_id").val(),author_id=jQuery("#author_id").val(),title=jQuery("#polltitle").val(),editor="undefined"!=typeof tinyMCE?tinyMCE.get("poll-content"):null,editor=editor?editor.getContent():jQuery("#poll-content").val(),poll_type=jQuery("#poll_type").val(),answer=jQuery("input.wbpoll_answer").map(function(){return jQuery(this).val()}).get(),answertype=jQuery("input.wbpoll_answer_extra").map(function(){return jQuery(this).val()}).get(),full_size_image_answer=jQuery("input.wbpoll_image_answer_url").map(function(){return jQuery(this).val()}).get(),video_answer_url=jQuery("input.wbpoll_video_answer_url").map(function(){return jQuery(this).val()}).get(),audio_answer_url=jQuery("input.wbpoll_audio_answer_url").map(function(){return jQuery(this).val()}).get(),html_answer=jQuery("textarea.wbpoll_html_answer_textarea").map(function(){return jQuery(this).val()}).get(),video_import_info=jQuery("input.wbpoll_video_import_info:checked").map(function(){return jQuery(this).val()}).get(),audio_import_info=jQuery("input.wbpoll_audio_import_info:checked").map(function(){return jQuery(this).val()}).get(),_wbpoll_start_date=jQuery("#_wbpoll_start_date").val(),_wbpoll_end_date=jQuery("#_wbpoll_end_date").val(),_wbpoll_user_roles=jQuery("#_wbpoll_user_roles-chosen").val(),_wbpoll_content=jQuery('input[name="_wbpoll_content"]:checked').val(),_wbpoll_never_expire=jQuery('input[name="_wbpoll_never_expire"]:checked').val(),_wbpoll_show_result_before_expire=jQuery('input[name="_wbpoll_show_result_before_expire"]:checked').val(),_wbpoll_multivote=jQuery('input[name="_wbpoll_multivote"]:checked').val(),_wbpoll_vote_per_session=jQuery("#_wbpoll_vote_per_session-number").val(),_wbpoll_add_additional_fields=jQuery('input[name="_wbpoll_add_additional_fields"]:checked').val(),answerarray=jQuery("input.wbpoll_answer").map(function(){return jQuery(this).val()}).get(),filteredArray=jQuery.grep(answerarray,function(value){return""!==value}),answerarray=jQuery.grep(filteredArray,function(value,index){return index===jQuery.inArray(value,filteredArray)}),answerarray=filteredArray.length!==answerarray.length;""==title?jQuery("#error_title").text("Poll Title is required"):""==poll_type?jQuery("#error_type").text("Poll Type is required"):",,,,"==answer?(jQuery("#error_ans").show(),jQuery("#error_ans").text("Poll options is required")):answerarray?(jQuery("#error_ans").show(),jQuery("#error_ans").text("Poll options are duplicate's, Please add unique options")):(answerarray=wbpollpublic.url,jQuery.ajax({url:answerarray+"/wp-json/wbpoll/v1/postpoll",type:"POST",contentType:"application/json",data:JSON.stringify({poll_id:event,author_id:author_id,title:title,content:editor,poll_type:poll_type,_wbpoll_answer:answer,_wbpoll_answer_extra:answertype,_wbpoll_full_size_image_answer:full_size_image_answer,_wbpoll_video_answer_url:video_answer_url,_wbpoll_audio_answer_url:audio_answer_url,_wbpoll_video_import_info:video_import_info,_wbpoll_audio_import_info:audio_import_info,_wbpoll_html_answer:html_answer,_wbpoll_start_date:_wbpoll_start_date,_wbpoll_end_date:_wbpoll_end_date,_wbpoll_user_roles:_wbpoll_user_roles,_wbpoll_content:_wbpoll_content,_wbpoll_never_expire:_wbpoll_never_expire,_wbpoll_show_result_before_expire:_wbpoll_show_result_before_expire,_wbpoll_multivote:_wbpoll_multivote,_wbpoll_vote_per_session:_wbpoll_vote_per_session,_wbpoll_add_additional_fields:_wbpoll_add_additional_fields}),beforeSend:function(xhr){xhr.setRequestHeader("X-WP-Nonce",wbpollpublic.rest_nonce)},success:function(response){response.success?(jQuery("#pollsuccess").show(),jQuery("#pollsuccess").text(response.message),window.setTimeout(function(){jQuery("#pollsuccess").hide(),jQuery("#pollsuccess").text(""),window.location.href=response.url},3e3)):jQuery("#pollsuccess").hide()},error:function(xhr,status,error){console.error("Poll creation failed:",error),jQuery("#pollerror").show().text(wbpollpublic.error_msg||"Failed to create poll. Please try again.")}}))})})})(jQuery);